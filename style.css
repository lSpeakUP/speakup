/* --- Global Styles & Variables (Refined Palette) --- */
:root {
    --main-background: #FFFFFF;
    --off-white-section-bg: #F9FCFD; /* Even lighter off-white */
    --primary-serious-color: #006064;  /* Deep, sophisticated Teal-Blue */
    --primary-vibrant-accent: #FFA726; /* Warm, inviting Golden-Orange */
    --secondary-vibrant-accent: #26A69A;/* Softer, approachable Confident Teal */
    --main-text-color: #212121; /* Dark, but not harsh black */
    
    --white: #FFFFFF;
    --light-text-on-dark-bg: #ECEFF1; /* Lighter and softer for dark BGs */
    --medium-grey-text: #616161;      /* Slightly warmer grey */
    --border-light: #E0E0E0;

    --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.05);
    --shadow-md: 0 4px 8px rgba(0,0,0,0.06);
    --shadow-lg: 0 10px 20px rgba(0,0,0,0.07);
}

/* --- Keyframes (Adding new ones) --- */
@keyframes drawLine { from { width: 0; } to { width: 100%; } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes gentleWave { 0%, 100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-5px) scale(1.02); } }
@keyframes pulseGlow { /* (previous version ok) */ }
@keyframes slideUpFadeIn { from { opacity: 0; transform: translateY(25px); } to { opacity: 1; transform: translateY(0); } }
@keyframes scaleIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
@keyframes growAndFadeQuote { from { transform: scale(0.5) translateY(10px); opacity: 0; } to { transform: scale(1) translateY(0); opacity: 1; } }
@keyframes radiatingBackground { /* (previous version ok) */ }

/* New Keyframes for Contextual BG Elements */
@keyframes drawSvgPath { to { stroke-dashoffset: 0; } }
@keyframes untanglePath { /* For pain point background */
    0% { stroke-dasharray: 500; stroke-dashoffset: 500; opacity: 1; } /* Start drawing tangled */
    50% { stroke-dashoffset: 0; opacity: 1; } /* Finish drawing tangled */
    60% { opacity: 0; } /* Hide tangled */
    100% { opacity: 0;}
}
@keyframes showResolvedPath { /* For pain point background */
    0% { opacity:0;}
    60% {opacity: 0;}
    61% { stroke-dasharray: 300; stroke-dashoffset: 300; opacity: 1; } /* Start drawing resolved */
    100% { stroke-dashoffset: 0; opacity: 1; } /* Finish drawing resolved */
}

@keyframes floatUp {
    0% { transform: translateY(20px) scale(0.8); opacity: 0; }
    100% { transform: translateY(0) scale(1); opacity: 0.3; } /* Low opacity for BG */
}
@keyframes spinAndFade {
    0% { transform: scale(0) rotate(0deg); opacity: 0; }
    100% { transform: scale(1) rotate(720deg); opacity: 0.4; }
}
@keyframes pulseAndSpread {
    0% { transform: scale(0.5); opacity: 0; }
    50% { transform: scale(1); opacity: 0.15; }
    100% { transform: scale(1.5); opacity: 0; }
}
@keyframes drawQuizPath {
    from { stroke-dashoffset: 100; opacity: 0; }
    to { stroke-dashoffset: 0; opacity: 0.5; }
}
@keyframes fadeInSparkle {
    0% { transform: scale(0); opacity: 0; }
    50% { opacity: 0.6; }
    100% { transform: scale(1.2); opacity: 0; }
}
@keyframes drawConnector { to { stroke-dashoffset: 0; opacity: 0.4; }}

/* --- Base Scroll Animation Styles (Remains the same logic) --- */
.animated-title, .animated-text, .benefit-item, .testimonial-card,
.quiz-placeholder, .teacher-photo, .quiz-cta,
.section-background-graphic.in-view { /* Added S-B-G */
    opacity: 0; /* Many BG graphics start hidden or are controlled by sub-element animations */
}
/* Main content animation */
.animated-title.in-view, .animated-text.in-view {
    animation: slideUpFadeIn 0.8s ease-out forwards;
}

/* (CSS Reset, Utility Classes - keep as before or slightly adjusted if needed) */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; font-size: 16px; }
body {
    font-family: var(--font-primary); line-height: 1.7; color: var(--main-text-color);
    background-color: var(--main-background);
    -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
}
img { max-width: 100%; height: auto; display: block; }
.container { width: 90%; max-width: 1140px; margin: 0 auto; padding: 0 15px; position: relative; }
.section { padding: 80px 0; position: relative; /* For absolute BG graphics */ overflow: hidden; }
@media (max-width: 768px) { .section { padding: 60px 0; } }

/* General Styling for Section Background Graphics Container */
.section-background-graphic {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    z-index: -1; /* Behind section content */
    pointer-events: none; /* Not interactive */
    display: flex; /* For alignment of multiple internal elements */
    justify-content: center;
    align-items: center;
    opacity: 0; /* Initially hidden, activated by JS .in-view */
    transition: opacity 0.5s ease-out;
}
.section-background-graphic.in-view {
    opacity: 1;
}


/* --- Refined Styles for Text & CTAs (adjusting colors from new palette) --- */
.section-title {
    font-size: 2.3rem; font-weight: 700; color: var(--primary-serious-color);
    text-align: center; margin-bottom: 50px; letter-spacing: -0.4px;
}
.section-title .highlight { color: var(--secondary-vibrant-accent); }
.section-subtitle.highlight-text-main { /* (As before) */ }

.cta-button { /* (As before with new accent color) */
    background-color: var(--primary-vibrant-accent);
    color: var(--main-text-color); /* Dark text on lighter orange */
    /* If accent is very dark, use white text */
}
.cta-button:hover, .cta-button:focus { background-color: #F57C00; /* Darker Orange */ }
/* ... (Other CTA styles as before) */

/* --- Sticky Header (adjusting logo up color) --- */
.sticky-header { /* ... */ }
.logo-text .up { font-weight: 700; color: var(--primary-serious-color); }
/* ... (Rest of header same) */

/* --- Hero Section (background wave color adjusted) --- */
.hero-section { /* ... */ }
.hero-background-shape svg.hero-svg-wave path { fill: var(--primary-serious-color); } /* Use serious color for hero wave */
.hero-title .highlight-animated { color: var(--secondary-vibrant-accent); }
/* ... (Rest of hero same) */

/* --- Pain Point Background Graphic --- */
.pain-point-bg-graphic svg {
    width: 80%; max-width: 300px; opacity: 0.2; /* Very subtle */
}
.pain-point-bg-graphic .bg-line-tangled {
    stroke: var(--medium-grey-text);
    stroke-dasharray: 500; stroke-dashoffset: 500; /* Initial for draw animation */
}
.pain-point-bg-graphic .bg-line-resolving {
    stroke: var(--secondary-vibrant-accent);
    stroke-dasharray: 300; stroke-dashoffset: 300;
}
.pain-point-section.in-view .bg-line-tangled { /* Section gets .in-view from observer */
    animation: untanglePath 2.5s ease-in-out 0.3s forwards;
}
.pain-point-section.in-view .bg-line-resolving {
    animation: showResolvedPath 2.5s ease-in-out 0.3s forwards;
}
.empathetic-text.in-view { animation-delay: 1.5s; } /* Delay after visual resolution */


/* --- Benefits Background Graphics --- */
.benefits-bg-graphic { /* Container is flex */
    justify-content: space-around; align-items: stretch;
}
.benefit-bg-element {
    opacity: 0;
    width: 100px; height: 100px;
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    transition: opacity 0.5s 0.3s ease-out, transform 0.5s 0.3s ease-out;
    transform: scale(0.8) translateY(20px);
}
.benefit-bg-element.active { /* Activated by JS when benefit item is in view */
    opacity: 0.1; /* Subtle elements */
    transform: scale(1) translateY(0);
}
.benefit-bg-1 { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M20 60 Q 50 40 80 60 M25 70 Q 50 50 75 70' stroke='%2300A09A' stroke-width='4' fill='none'/%3E%3C/svg%3E"); /* Speech bubble like */ }
.benefit-bg-2 { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M10 50 Q 30 20 50 50 T 90 50' stroke='%2300A09A' stroke-width='4' fill='none'/%3E%3C/svg%3E"); /* Flowing line */ }
.benefit-bg-3 { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='20' stroke='%2300A09A' stroke-width='4' fill='none'/%3E%3Cpath d='M50 30 V70 M30 50 H70' stroke='%2300A09A' stroke-width='4'/%3E%3C/svg%3E"); /* Reinforcing circle/plus */ }
/* ... (Benefit item styles same) */
.benefit-box .checkmark-icon { color: var(--primary-serious-color); /* On Orange BG */ }


/* --- Quiz Background Graphic --- */
.quiz-bg-graphic svg { width: 90%; max-width: 400px; }
.quiz-bg-graphic .quiz-bg-dot {
    fill: var(--secondary-vibrant-accent);
    opacity: 0;
}
.quiz-bg-graphic .quiz-bg-path {
    stroke: var(--secondary-vibrant-accent);
    stroke-width: 1.5; fill: none;
    stroke-dasharray: 100; stroke-dashoffset: 100;
    opacity: 0;
}
.quiz-section.in-view .quiz-bg-dot:nth-child(1) { animation: fadeIn 0.5s ease-out 0.5s forwards; }
.quiz-section.in-view .quiz-bg-path:nth-of-type(1) { animation: drawQuizPath 1s ease-out 0.7s forwards; }
.quiz-section.in-view .quiz-bg-dot:nth-child(3) { animation: fadeIn 0.5s ease-out 1s forwards; }
.quiz-section.in-view .quiz-bg-path:nth-of-type(2) { animation: drawQuizPath 1s ease-out 1.2s forwards; }
.quiz-section.in-view .quiz-bg-dot:nth-child(5) { animation: fadeIn 0.5s ease-out 1.5s forwards; }
.quiz-section.in-view .quiz-bg-path:nth-of-type(3) { animation: drawQuizPath 1s ease-out 1.7s forwards; }
.quiz-placeholder.in-view { /* ... (as before with quizPulse) */ opacity: 1; /* Ensure it's visible */}

/* --- About Professor Background & Photo Sparks --- */
.about-bg-graphic svg {
    width: 60%; max-width: 250px; opacity: 0; /* Initially hidden */
    transition: opacity 0.8s ease-out 0.5s;
}
.about-section.in-view .about-bg-graphic svg { opacity: 0.08; }
.about-bg-graphic .about-node {
    fill: var(--primary-serious-color);
    transition: r 0.5s ease-out;
}
.about-section.in-view .about-node-center { r: 10; transition-delay: 1s;}
.about-bg-graphic .about-connector {
    stroke: var(--secondary-vibrant-accent); stroke-width: 1;
    stroke-dasharray: 50; stroke-dashoffset: 50; opacity:0;
}
.about-section.in-view .about-connector:nth-of-type(1) { animation: drawConnector 0.8s ease-out 1.0s forwards;}
.about-section.in-view .about-connector:nth-of-type(2) { animation: drawConnector 0.8s ease-out 1.2s forwards;}
.about-section.in-view .about-connector:nth-of-type(3) { animation: drawConnector 0.8s ease-out 1.4s forwards;}
.about-section.in-view .about-connector:nth-of-type(4) { animation: drawConnector 0.8s ease-out 1.6s forwards;}

.teacher-photo-area { position: relative; /* For sparks */ }
.teacher-photo { /* Class for the actual img tag */
    width: 200px; height: 200px; border-radius: 50%;
    object-fit: cover;
    border: 7px solid var(--primary-vibrant-accent);
    box-shadow: 0 0 0 7px var(--off-white-section-bg), var(--shadow-lg);
    opacity: 0; /* Animated by .in-view on itself */
}
.teacher-photo.in-view { animation: scaleIn 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; opacity:1; }

.teacher-photo-sparks { position: absolute; top:0; left:0; width:100%; height:100%; }
.teacher-photo-sparks .spark {
    position: absolute;
    width: 8px; height: 8px;
    background-color: var(--primary-vibrant-accent);
    border-radius: 50%;
    opacity: 0; /* Animated by JS or Intersection Observer */
}
.teacher-photo.in-view + .teacher-photo-sparks .spark:nth-child(1) { top: 10%; left: 10%; animation: fadeInSparkle 1s ease-out 0.8s forwards; }
.teacher-photo.in-view + .teacher-photo-sparks .spark:nth-child(2) { top: 80%; left: 20%; animation: fadeInSparkle 1s ease-out 1.0s forwards; }
.teacher-photo.in-view + .teacher-photo-sparks .spark:nth-child(3) { top: 30%; left: 85%; animation: fadeInSparkle 1s ease-out 1.2s forwards; }


/* --- Testimonials Background Graphic --- */
.testimonials-bg-graphic { display:flex; justify-content:space-between; align-items:center; width:80%; margin:auto;}
.bg-starburst {
    width: 50px; height: 50px;
    opacity: 0; transform: scale(0.5);
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23FFA726'%3E%3Cpath d='M50 0L55 35L85 15L65 45L100 50L65 55L85 85L55 65L50 100L45 65L15 85L35 55L0 50L35 45L15 15L45 35z'/%3E%3C/g%3E%3C/svg%3E");
    background-size: contain; background-repeat:no-repeat;
}
.testimonials-section.in-view .bg-starburst:nth-child(1){ animation: spinAndFade 1.2s ease-out 0.5s forwards; animation-delay: 0.5s;}
.testimonials-section.in-view .bg-starburst:nth-child(2){ animation: spinAndFade 1.2s ease-out 0.5s forwards; animation-delay: 0.9s;}
.testimonials-section.in-view .bg-starburst:nth-child(3){ animation: spinAndFade 1.2s ease-out 0.5s forwards; animation-delay: 1.3s;}
/* (Testimonial card styles and quote mark anim as before) */


/* --- Final CTA Background Particles --- */
.final-cta-background-animation {
    position: absolute; top:0; left:0; width: 100%; height: 100%;
    z-index: 0; pointer-events:none;
}
.cta-particle {
    position: absolute;
    background-color: var(--primary-vibrant-accent);
    border-radius: 50%;
    opacity: 0;
}
/* Random particle placement and animation - can be complex, keeping it simple */
.final-cta-section.in-view .cta-particle:nth-child(1){ width:10px; height:10px; top:20%; left:15%; animation: pulseAndSpread 3s ease-out 0.5s infinite;}
.final-cta-section.in-view .cta-particle:nth-child(2){ width:15px; height:15px; top:70%; left:30%; animation: pulseAndSpread 3s ease-out 1s infinite;}
.final-cta-section.in-view .cta-particle:nth-child(3){ width:8px;  height:8px;  top:50%; left:80%; animation: pulseAndSpread 3s ease-out 0.8s infinite;}
.final-cta-section.in-view .cta-particle:nth-child(4){ width:12px; height:12px; top:80%; left:90%; animation: pulseAndSpread 3s ease-out 1.2s infinite;}
.final-cta-section.in-view .cta-particle:nth-child(5){ width:7px;  height:7px;  top:10%; left:60%; animation: pulseAndSpread 3s ease-out 0.6s infinite;}
.final-cta-section.in-view .cta-particle:nth-child(6){ width:10px; height:10px; top:40%; left:5%;  animation: pulseAndSpread 3s ease-out 1.4s infinite;}
/* (Rest of Final CTA styles same, maybe adjust animation delays for title/button) */


/* --- Footer --- (as before with branding border) */
.site-footer {
    background-color: var(--main-text-color); color: #B0BEC5; /* Softer footer text */
    text-align: center; padding: 30px 0; font-size: 0.875rem; /* Slightly larger */
    border-top: 4px solid var(--primary-serious-color);
}
.site-footer a { color: #ECEFF1; /* Lighter links for contrast */ }
.site-footer a:hover { color: var(--primary-vibrant-accent); }
