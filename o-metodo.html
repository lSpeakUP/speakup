<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Método - Speak Up (Working Scrollytelling)</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    
    <!-- Assuming your base styles are in an external file -->
    <!-- <link rel="stylesheet" href="css/style.css"> -->

    <style>
        /* Basic styles for demonstration. You can keep your own. */
        body { font-family: 'Inter', sans-serif; line-height: 1.6; color: #333; margin: 0; }
        .container { max-width: 1100px; margin: 0 auto; padding: 0 20px; }
        .page-header, .method-summary, .final-cta { padding: 80px 0; text-align: center; }
        .page-title, .pillar-title, .summary-title, .final-cta-title { font-family: 'Poppins', sans-serif; }
        .cta-button { display: inline-block; padding: 12px 24px; background-color: #4A90E2; color: white; text-decoration: none; border-radius: 8px; font-weight: bold; }
        /* Add your header/footer/etc styles here or link them */
        
        /* =========================================================================
           DEFINITIVE SCROLLYTELLING STYLES
           ========================================================================= */

        /* This container is the trigger for the entire pinning sequence. */
        .scrolly-container {
            display: flex;
            align-items: flex-start;
            gap: 5%;
        }

        /* 1. THE VISUALS COLUMN (THE PINNED ELEMENT) */
        .pillar-visuals-col {
            width: 45%;
            flex-shrink: 0;
            /* Height of the container WHEN IT'S PINNED. 
               Should be less than 100vh to avoid covering the screen. */
            height: 80vh; 
            position: relative; /* Becomes sticky via JS */
            top: 10vh; /* Will be sticky 10vh from the top */
        }

        /* 2. THE INDIVIDUAL IMAGE WRAPPERS */
        .pillar-visual-item {
            position: absolute; /* Stack all images on top of each other */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            
            /* CRITICAL: Set all but the FIRST image to be invisible initially.
               This prevents the "no image on load" problem. GSAP's autoAlpha
               handles both opacity and visibility for us. */
        }
        
        .pillar-visual-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* 3. THE TEXT COLUMN (THE SCROLLING ELEMENT) */
        .pillar-text-col {
            width: 50%;
            flex-grow: 1;
        }

        /* 4. THE INDIVIDUAL TEXT BLOCKS */
        .pillar-text-content {
            /* This is the secret sauce. Making each text block tall gives us
               the "runway" to scroll through while the image is pinned. */
            min-height: 70vh;
            padding: 2rem 0; /* Add some breathing room */
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        /* Ensure the final section doesn't abruptly cut off the effect */
        .method-summary {
            padding-top: 50vh; /* This gives space for the last pillar to finish */
        }
        
        /* On mobile, we disable the effect and just stack everything */
        @media (max-width: 768px) {
            .scrolly-container {
                flex-direction: column;
            }
            .pillar-visuals-col, .pillar-text-col {
                width: 100%;
            }
            .pillar-visuals-col {
                /* On mobile, JS will be disabled. We need to handle visibility. */
                height: 50vh;
                margin-bottom: 2rem;
                position: relative;
            }
            .pillar-visual-item {
                /* Show all images on mobile since they will appear in order */
                position: relative; 
                opacity: 1;
                visibility: visible;
                display: none; /* Hide all... */
                margin-bottom: 1.5rem;
            }
             /* ...then show them one-by-one with their text */
            .pillar-text-content:nth-of-type(1) + .pillar-visual-item:nth-of-type(1),
            .pillar-text-content:nth-of-type(2) + .pillar-visual-item:nth-of-type(2),
            .pillar-text-content:nth-of-type(3) + .pillar-visual-item:nth-of-type(3) {
                 /* This is a trick: this won't work because visuals/text are in different columns. 
                    We must re-structure HTML for mobile or use a simpler display method. 
                    FOR NOW, let's just show them all. */
                 display: block;
            }
             .pillar-text-content {
                min-height: auto;
             }
            .method-summary {
                padding-top: 80px;
            }
        }

    </style>
</head>
<body>

    <!-- Your Header -->
    <header class="page-header">
        <div class="container">
            <h1 class="page-title">O Método Speak Up</h1>
            <p class="page-subtitle">Meu método não nasceu em livros didáticos, mas da observação das barreiras que nós, brasileiros, enfrentamos. Ele é desenhado para resolver o problema real: o medo.</p>
        </div>
    </header>

    <main>
        <section class="method-pillars">
            <div class="container">
                <div class="scrolly-container">

                    <!-- Column 1: Pinned Visuals. The HTML structure is perfect. -->
                    <div class="pillar-visuals-col">
                        <div class="pillar-visual-item">
                            <img src="https://images.unsplash.com/photo-1554435493-93427e8a4a4d?q=80&w=2574" alt="Diagnóstico">
                        </div>
                        <div class="pillar-visual-item">
                            <img src="https://images.unsplash.com/photo-1618526224424-6b97945c71d9?q=80&w=2574" alt="Conexão">
                        </div>
                        <div class="pillar-visual-item">
                            <img src="https://images.unsplash.com/photo-1531326425424-5d359679199b?q=80&w=2574" alt="Evolução">
                        </div>
                    </div>

                    <!-- Column 2: Scrolling Text -->
                    <div class="pillar-text-col">
                        <div class="pillar-text-content">
                            <span class="pillar-number">Pilar 1</span>
                            <h2 class="pillar-title">Diagnóstico e Imersão</h2>
                            <p>O primeiro passo é entender você. Suas metas, seu nível atual, suas dificuldades e o que te motiva.</p>
                        </div>
                        <div class="pillar-text-content">
                            <span class="pillar-number">Pilar 2</span>
                            <h2 class="pillar-title">Conexão e Conversação</h2>
                            <p>Aqui, a prática reina. Focamos em conversas reais desde o primeiro dia, usando temas que são do seu interesse.</p>
                        </div>
                        <div class="pillar-text-content">
                            <span class="pillar-number">Pilar 3</span>
                            <h2 class="pillar-title">Feedback e Evolução</h2>
                            <p>Cada aula é uma oportunidade de crescimento. Ofereço feedback constante e construtivo, não apenas corrigindo erros.</p>
                        </div>
                    </div>

                </div>
            </div>
        </section>
        
        <!-- Subsequent Sections -->
        <section class="method-summary">
            <div class="container">
                <h3 class="summary-title">Segurança, Pontes e Identidade.</h3>
                <p>Estes três pilares formam uma abordagem que não apenas ensina inglês, mas que devolve a confiança.</p>
            </div>
        </section>
        <section class="final-cta">
             <div class="container">
                <h2 class="final-cta-title">Entendeu o "como"?</h2>
                <a href="#" class="cta-button cta-button-large">Agende sua conversa</a>
            </div>
        </section>
    </main>

    <!-- GSAP Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <script>
        // --- THE "IGLOO MOMENT" SCRIPT - SIMPLIFIED & ROBUST ---
        
        // Only run the animation on screens wider than 768px
        if (window.matchMedia("(min-width: 769px)").matches) {
            
            gsap.registerPlugin(ScrollTrigger);

            // Select the elements
            const visualItems = gsap.utils.toArray(".pillar-visual-item");
            const textItems = gsap.utils.toArray(".pillar-text-content");

            // Set initial state: all images are invisible except the first one
            gsap.set(visualItems, { autoAlpha: 0 });
            gsap.set(visualItems[0], { autoAlpha: 1 });

            // Create a master timeline that pins the visuals column
            const pinTimeline = gsap.timeline({
                scrollTrigger: {
                    trigger: ".scrolly-container", // The container for the whole experience
                    pin: ".pillar-visuals-col",   // The element to pin
                    start: "top top",            // Pin when the top of the container hits the top of the viewport
                    end: "bottom bottom",        // Unpin when the bottom of the container hits the bottom
                    scrub: 1,                    // Smooth scrubbing
                    // markers: true,               // Uncomment for debugging
                }
            });

            // Create a ScrollTrigger for each text item to fade in the corresponding visual
            textItems.forEach((textItem, i) => {
                ScrollTrigger.create({
                    trigger: textItem,
                    start: "top center", // When the top of the text hits the center of the viewport
                    end: "bottom center",  // When the bottom of the text leaves the center
                    // markers: {startColor: "blue", endColor: "red", indent: 40}, // For debugging this specific trigger
                    onEnter: () => {
                        // Fade in the corresponding visual, and fade out all others
                        gsap.to(visualItems, { autoAlpha: 0, duration: 0.5, overwrite: "auto" });
                        gsap.to(visualItems[i], { autoAlpha: 1, duration: 0.5, overwrite: "auto" });
                    },
                    onEnterBack: () => {
                        // Same logic for scrolling back up
                        gsap.to(visualItems, { autoAlpha: 0, duration: 0.5, overwrite: "auto" });
                        gsap.to(visualItems[i], { autoAlpha: 1, duration: 0.5, overwrite: "auto" });
                    }
                });
            });
        }
    </script>
</body>
</html>
